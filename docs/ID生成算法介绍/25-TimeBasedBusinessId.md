# TimeBasedBusinessId 基于时间的业务ID生成算法

## 一、概述
TimeBasedBusinessId 是专为业务场景设计的ID生成算法，通过将时间戳与业务元数据（如业务类型、地域、渠道）深度融合，生成既具备全局唯一性又包含明确业务含义的ID。广泛应用于电商订单、金融交易、物流运单等需要人工识别或系统快速分类的场景。

## 二、核心特性
1. **业务可解析性**：ID直接包含业务类型（如'OD'表示订单）、地域（如'CN'表示中国）等元数据，无需额外查询即可定位业务上下文
2. **时间有序性**：基于时间戳生成，保证ID按业务发生顺序递增，便于时间范围查询和日志排序
3. **灵活扩展性**：支持自定义字段（如添加渠道标识'WX'表示微信），适配多业务线需求
4. **短长度高可读性**：采用Base62/Base36编码，相比纯数字ID更短且避免特殊字符（如'OD-CN-20240615-001'）
5. **冲突可控**：通过业务分区+序列号设计，单业务分区单时间单位内冲突概率<0.001%

## 三、典型数据结构
以电商订单ID为例（字符串格式）：
```
[业务类型2位][地域2位][时间戳8位][序列号4位]
示例：OD-CN-20240615-001
```
- 业务类型：'OD'=订单，'PK'=包裹，'RF'=退款（可扩展至99种）
- 地域：'CN'=中国大陆，'US'=美国，'JP'=日本（可扩展至99个地区）
- 时间戳：YYYYMMDD格式（支持100年周期）
- 序列号：单地域单业务单日可生成9999个ID

## 四、与其他ID方案对比
| 特性         | TimeBasedBusinessId  | Snowflake             | UUIDv4                |
|--------------|----------------------|-----------------------|-----------------------|
| 业务含义     | 显式包含（可解析）   | 无（需额外存储）      | 无（需额外存储）      |
| 可读性       | 高（自然语言格式）   | 低（纯数字）          | 低（乱序字符串）      |
| 长度         | 16-20字符（可配置）  | 18位数字              | 36位字符串            |
| 生成方式     | 规则拼接+序列号      | 位运算+内存递增       | 随机数生成            |
| 适用场景     | 业务标识/人工核对    | 系统内部主键          | 全局唯一标识（无含义）|

## 五、使用注意事项
1. **字段长度规划**：需预留扩展空间（如业务类型从2位扩展至3位可支持999种），避免后期重构
2. **编码选择**：推荐Base62（含数字+大小写字母）平衡长度与可读性，敏感场景避免使用Base64（含特殊字符）
3. **时间精度**：根据业务频率选择（日级适合低频业务，小时级适合高频业务）
4. **序列号重置**：需按时间单位（日/小时）重置序列号，避免跨周期ID重复
5. **校验位设计**：关键业务可添加1位校验位（如通过Luhn算法），提升录入准确性
6. **存储优化**：建议存储原始字符串（保留业务含义），或通过哈希转换为数值型（节省存储空间）
7. **跨系统兼容**：与纯数值ID系统交互时，需通过中间层转换（如提取时间戳+业务类型生成关联键）